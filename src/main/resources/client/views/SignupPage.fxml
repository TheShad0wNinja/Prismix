<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<!-- Main layout using BorderPane -->
<BorderPane xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.tavern.client.views.SignupPage"> <!-- Link to the JavaFX controller -->

    <padding>
        <Insets topRightBottomLeft="20"/>
    </padding>

    <!-- Title Panel (BorderPane.top) - Replicated with VBox for vertical centering of the label -->
    <top>
        <VBox alignment="CENTER" BorderPane.alignment="CENTER">
            <Label text="Create Your Account" styleClass="label, title"/>
            <padding>
                <Insets top="20" bottom="20"/>
            </padding>
        </VBox>
    </top>

    <!-- Form Panel (BorderPane.center) - Replicated with GridPane -->
    <center>
        <GridPane hgap="10" vgap="10" alignment="CENTER"> <!-- Use GridPane for form fields -->
            <padding>
                <Insets topRightBottomLeft="10"/>
            </padding>

            <!-- Username Field -->
            <Label text="Username:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="label"/>
            <TextField fx:id="usernameField" promptText="Enter your username" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

            <!-- Display Name Field -->
            <Label text="Display Name:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="label"/>
            <TextField fx:id="displayNameField" promptText="Enter your display name" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

            <!-- Avatar Selection -->
            <Label text="Profile Picture:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="label"/>
            <HBox spacing="10" alignment="CENTER_LEFT" GridPane.rowIndex="2" GridPane.columnIndex="1"> <!-- HBox for avatar preview and button -->
                <ImageView fx:id="avatarPreview" fitHeight="64" fitWidth="64" preserveRatio="false"
                           style="-fx-border-color: gray; -fx-border-width: 4; -fx-background-color: lightgray;"/> <!-- Styling the ImageView directly or via CSS class -->
                <Button text="Choose Image" onAction="#selectAvatar" styleClass="button"/>
            </HBox>

            <!-- Error Message Label (Initially hidden, updated by controller) -->
            <Label fx:id="errorLabel" styleClass="error-text" visible="false" managed="false"
                   GridPane.rowIndex="5" GridPane.columnIndex="0" GridPane.columnSpan="2"
                   alignment="CENTER" />

        </GridPane>
    </center>

    <!-- Buttons Panel (BorderPane.bottom) - Replicated with HBox -->
    <bottom>
        <HBox alignment="CENTER" spacing="20" BorderPane.alignment="CENTER">
            <Button text="Sign Up" onAction="#handleSignup" styleClass="button"/>
            <Button text="Cancel" onAction="#goBackToLogin" styleClass="button"/> <!-- Assuming you might have a secondary button style -->
            <padding>
                <Insets top="10" bottom="10"/>
            </padding>
        </HBox>
    </bottom>

</BorderPane>
